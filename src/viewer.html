<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="viewer.css">
        <link rel="stylesheet" type="text/css" href="codemirror/lib/codemirror.css">
    </head>
    <body>
        <canvas width="1920" height="1080" id="canvas"></canvas>

        <div id="ui-tabs">
            <div id="tutorial">
                <h2>Tutorial</h2>
                <h3>What is this?</h3>
                <p>This is a 3D rendering engine. Basically, it just draws stuff in 3D space like any 3D video game does (though the mechanism by which it does this differs substantially). You can move around in 3D space with the W, A, S, D, Space, and Shift (you'll recognize this if you've ever played Minecraft) keys to view the world from different angles. Press E to move the light source to your current location (might not be obvious with default settings). To be able to control your orientation, click the portion of the screen without the UI. To regain control of your cursor, press escape.</p>
                <h3>Tabs</h3>
                <h4>Settings</h4>
                <p>The settings tab is where you'll find all the parameters you can adjust to alter the behavior of the raymarching engine. Hover over a parameter to view a detailed explanation of it below. Be aware that some parameters will require that the shader (the program that draws the pixels on the screen) be reloaded. This can cause a lag spike lasting several seconds.</p>
                <p>You can also find setting presets at the top of the settings tab. This lets you change several settings to predetermined values I've chosen, though you'll have to click "Apply Setting Preset" to confirm your choice. Currently, there are two options: default.json, which are the default settings the viewer has on startup; and realtime-global-illumination.json, which are much more computationally intensive settings, designed to simulate realistic light bounces.</p>
                <h4>Signed Distance Function Shader</h4>
                <p>This tab contains two major elements: A GLSL shader and a dropdown containing several preset shaders. Most people will likely only care about the preset shader (the second one). This lets you select the thing that is actually being drawn. By default, it's just a 3D grid of cubes (which I chose for its relatively low computational cost). However, you can change this to all sorts of other things, like fractals. However, do be aware that changing the shader will cause a lag spike.</p>
                <p>You can also write shaders for yourself to draw your own things to the screen! Unfortunately, I don't really have any builtin means of debugging the shaders beyond spitting the shader info log into the developer console. The line numbers will be wrong because I literally just paste the shader into an existing, larger shader.</p>
                <h3>PAGE CURRENTLY UNDER CONSTRUCTION</h3>
                <p>Just wanted to get the important stuff out of the way. Rest of this page (and in fact a lot of this project) is still under construction!</p>
            </div>
            <div id="ui-container">
                <h2>Presets</h2>
                <p>Below are a few presets for settings. Note that many of these don't change every parameter.</p>
                <select id="setting-presets">
                    <option value="default.json">default.json</option>
                    <option value="realtime-global-illumination.json">realtime-global-illumination.json</option>
                </select>
                <button id="apply-setting-preset">Apply Setting Preset</button>
                <div id="settings">
                </div>
            </div>
            <div id="sdf-shader">
                <div class="resizeable" id="shader-input-container">
                    <textarea id="shader-input"></textarea>
                </div>
                <select id="choose-shader">
                    <option value="default.glsl">default.glsl</option>
                    <option value="unit-sphere.glsl">unit-sphere.glsl</option>
                    <option value="fractal.glsl">fractal.glsl</option>
                    <option value="textured-cube.glsl">textured-cube.glsl</option>
                    <option value="moving-cube-grid.glsl">moving-cube-grid.glsl</option>
                    <option value="fractalsphere.glsl">fractalsphere.glsl</option>
                    <option value="dyson-sphere-sortof.glsl">dyson-sphere-sortof.glsl</option>
                    <option value="menger-sponge.glsl">menger-sponge.glsl</option>
                </select>
                <button id="update-shader">Update Shader</button>
            </div>
            <div id="recordings">
                <h2>Recordings</h2>
                <p>Press R to start or stop a recording. When playing a recording back, press X to exit recording playback.</p>
                <div id="list-of-recordings">

                </div>
            </div>
            <div id="renders">
                <button id="render-recording">Render Recording</button>
                <select id="select-recording">

                </select>
                <p></p>
                <select id="recording-transformer-presets">
                    <option value="global-illumination-explanation.json">global-illumination-explanation.json</option>
                    <option value="global-illumination.json">global-illumination.json</option>
                </select>
                <button id="apply-recording-transformer-preset">Apply Recording Transformer Preset</button>
            </div>
            <div id="credits">
                <h2>Credits</h2>
                <p>Disclaimer: <em>None of the following people endorse this project</em> (well, except radian628, who fully endorses this project, because I... uhhh... created most of it).</p>
                <ul>
                    <li><a href="https://github.com/radian628/raymarching-engine">Raymarching Engine - Radian628</a></li>
                    <li><a href="https://stackoverflow.com/questions/4200224/random-noise-functions-for-glsl">GLSL Hash Function - Spatial on StackOverflow</a></li>
                    <li><a href="https://github.com/BrutPitt/glslSmartDeNoise">Denoiser - BrutPitt</a></li>
                    <li><a href="https://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm">Box Distance Function (and a few others) - Inigo Quilez</a></li>
                    <li><a href="https://codemirror.net/doc/manual.html">CodeMirror - Marijn Haverbeke</a></li>
                </ul>
            </div>
        </div>
        <div id="tab-switcher">

        </div>
        <div id="statistics">

        </div>
        <script src="codemirror/lib/codemirror.js"></script>
        <script src="codemirror/javascript.js"></script>
        <script src="./raymarcher.js"></script>
        <script src="./renderer.js"></script>
        <script src="viewer.js"></script>
    </body>
</html>